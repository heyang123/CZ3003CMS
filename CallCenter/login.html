<!DOCTYPE html>
<html>
	<head>
		<title>Login Page</title>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/ecmascript" src="sha1.js"></script>   
		<script type="text/javascript">
			function login() {
				// User input data
				user = {};
				user.cmd = "login";
				user.param1 = $('#name').val();
				user.param2 = hashPassword($('#password').val());
				alert(user.param2);
				validateWithServer(user);
			}

			function hashPassword(password) {
				return hex_sha1(password);
			}

			function validateWithServer(user) {
				/*
				// Test database user sample
				database = {};
				database.cmd = 'login';
				database.username = 'yang';
				database.password = '3003';	
				// Check
				if (user.cmd == database.cmd && user.param1 == database.username && user.param2 == database.password) {
					alert("Login successful");
					window.location.href='keyInInfo.html';
				} else {
					alert("Wrong username or password");
					window.location.reload();
				}
				*/

				// Send to server
			    $.ajax({
			    	type: 'POST',
			    	// Server url
			    	url: 'serverURL',
			    	data: user,
			    	success : function(result){
			        	// Judge login successful or not according to result
			        	if (result && result == 'success') {
			        	    alert("Login successful");
							window.location.href='keyInInfo.html';
			        	} else {
			        	    alert("Wrong username or password");
							window.location.reload();
			        	}
			    	}
			    });
			}
		</script>
	</head>
	<body>
	Username: <br /><input type="text" id="name" /><br />
	Password: <br /><input type="password" id="password" /><br />
	<input type="button" onclick="login()" value="Login" />
	</body>
</html>